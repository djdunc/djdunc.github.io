---
layout: post
title:  "Thirst + Traccar"
date:   2025-11-23 08:00:00 +0100
excerpt_separator: <!--more-->

# tags: try to choose one or two from these
# events, research, teaching, publication, making, arduino, casa, training
# hardware, job, book, convergence, stuff, how to work, photos, travel, home
tags: 
    - events
    - making

category: blog  
---

<a data-flickr-embed="true" href="https://www.flickr.com/photos/pseudonomad/54941408818/in/datetaken/" title="Wellcome Trust Cafe"><img src="https://live.staticflickr.com/65535/54941408818_9eb4738b05_c.jpg" width="100%" alt="Wellcome Trust Cafe"/></a><script async src="//embedr.flickr.com/assets/client-code.js" charset="utf-8"></script>

Start of the week was spent in planning mode - creating flight plans for some scans of Marshgate with the BLK2FLY and DJI M4E plus getting the timeline sorted for ESB module next term. The end of the week included a visit to [Thirst exhibition at the Wellcome Collection](https://wellcomecollection.org/exhibitions/thirst-in-search-of-freshwater) exploring water and our relationship with it. In between we set-up a bus tracker for the Student Union using Traccar and an off the shelf GPS tracker, and downloaded the photos from the Nature Smart Garden to create a timelapse for 2025.

<!--more-->

The trip to Thirst was to explore the content (which was really interesting!) but to also look at how the exhibition was designed and put together. The exhibition uses a combination of objects, interactive displays, audio-visual content and immersive environments to engage visitors - useful prep for our CE exhibition. They say:

_"From ancient Mesopotamia and Victorian London to modern-day Nepal and Singapore, the exhibition highlights the vital role of freshwater in shaping health and ecosystems; the consequences of mismanagement, like the spread of infectious disease; and community-led solutions to the global water crisis."_

<a data-flickr-embed="true" href="https://www.flickr.com/photos/pseudonomad/54940331732/in/datetaken/" title="Thirst at Wellcome Collection"><img src="https://live.staticflickr.com/65535/54940331732_22d9c5af6d_c.jpg" width="100%" alt="Thirst at Wellcome Collection"/></a>
Thirst at Wellcome Collection - more images on Flickr.

Work on the SU bus tracker progressed well. Working with Steve managed to get the Traccar server up and running on a portainer on one of our servers, and then configured the GPS tracker to send data to it. Most of the headache was configuring the cellular device and managing ports to get messages through the network. But now we have JSON packets flowing through our MQTT broker which means we can start to explore was to visualise that information. Steve has a web app in progress but the open data also leaves the door open for students to create other ways of seeing the data.

<a data-flickr-embed="true" href="https://www.flickr.com/photos/pseudonomad/54941226226/in/datetaken/" title="traccar-bus"><img src="https://live.staticflickr.com/65535/54941226226_b01a336ba9_c.jpg" width="100%" alt="traccar-bus"/></a>
Traccar website showing admin side of tracker.

<a data-flickr-embed="true" href="https://www.flickr.com/photos/pseudonomad/54941484904/in/datetaken/" title="sjg-wip"><img src="https://live.staticflickr.com/65535/54941484904_538ff238d4_c.jpg" width="100%" alt="sjg-wip"/></a>
Early prototype of bus tracker web app.

The JSON for the bus location is available via MQTT at mqtt.cetools.org on topic /UCL/OPS/Bus and has the following payload format:

```javascript
{
"position":
	{
	"id":0,
	"attributes":
		{
		"ignition":false,
		"status":4294966271,
		"io1":"234",
		"io2":"10",
		"io3":"4112",
		"io4":"134255229",
		"io5":"100",
		"distance":0.0,
		"totalDistance":11611.549756931034,
		"motion":false
		},
	"deviceId":1,
	"protocol":"h02",
	"serverTime":"2025-11-19T17:50:04.410+00:00",
	"deviceTime":"2025-11-19T17:50:02.000+00:00",
	"fixTime":"2025-11-19T17:50:02.000+00:00",
	"valid":false,
	"latitude":51.538595,
	"longitude":-0.010236666666666666,
	"altitude":0.0,
	"speed":0.0,
	"course":0.0,
	"address":null,
	"accuracy":0.0,
	"network":null,
	"geofenceIds":null
	},
"device":
	{
	"id":1,
	"attributes":{},
	"groupId":0,
	"calendarId":0,
	"name":"ST-915-SU-Bus",
	"uniqueId":"7026070782",
	"status":"online",
	"lastUpdate":"2025-11-19T17:50:04.412+00:00",
	"positionId":44,
	"phone":null,
	"model":null,
	"contact":null,
	"category":"bus",
	"disabled":false,
	"expirationTime":null
	}
}
```

Finally, I downloaded the daily images from the Nature Smart Garden project to create a timelapse of the garden over 2025. Using FFmpeg I stitched together the images into a video file which you can see below. This is the short 5 sec version of the 23Gb of images collected. Notes on ffmpeg are at bottom of post for future reference. 


<video width="800" height="600" controls>
  <source src="/assets/img/hd_web_timelapse_daily.mp4" type="video/mp4">
  Your browser does not support the video tag.
</video>
Timelapse from May to September 2025.

Looking at [links.duncanwilson.com](https://links.duncanwilson.com/) I also spent time on:
- reading about [Arduino T&C's](https://blog.arduino.cc/2025/11/21/the-arduino-terms-of-service-and-privacy-policy-update-setting-the-record-straight/)
- risks of [AI transcriptions](https://www.careful.industries/blog/2025-11-nine-risks-caused-by-ai-notetakers)
- uploaded a video of our LLM for timeseries analysis project [Trust2](https://www.youtube.com/watch?v=RZx3TdiFoPU)
- real time sewage maps by colleagues at UCL: [Sewage Map](https://www.sewagemap.co.uk)

<a data-flickr-embed="true" href="https://www.flickr.com/photos/pseudonomad/54941205516/in/datetaken/" title="Sewage Map"><img src="https://live.staticflickr.com/65535/54941205516_12444a4f48_c.jpg" width="100%" alt="Sewage Map"/></a>

Doesn't look like particularly pleasant water out there at the moment.

Notes:

```bash
During light hours

find 2025* -type f -name "*.jpg" | sort | grep -E 'frame_(09|1[0-4])[0-9]{4}\.jpg' | awk '
{
    print "file \047" $0 "\047";
    print "duration 0.033333333";
}
END {
    print ""; 
}' | sed '$d' > daylight_input_files.txt

ffmpeg -f concat -safe 0 -i daylight_input_files.txt -c:v libx264 -pix_fmt yuv420p -crf 23 -vf scale=1280:-2 hd_web_timelapse.mp4


One per day

find 2025* -type f -name "*.jpg" | sort | grep -E 'frame_1400[0-9]{2}\.jpg' | awk -F'/' '
{
    if (!seen[$1]++) {
        print "file \047" $0 "\047";
        print "duration 0.033333333";
    }
}
END {
    print "";
}' | sed '$d' > daily_1400_files.txt

ffmpeg -f concat -safe 0 -i daily_1400_files.txt -c:v libx264 -pix_fmt yuv420p -crf 23 -vf scale=1280:-2 hd_web_timelapse_daily.mp4
```

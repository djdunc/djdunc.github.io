<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>MQTT Console Logger</title>
    <!-- Include the Paho MQTT JavaScript client library from a CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/paho-mqtt/1.1.0/paho-mqtt.min.js"></script>
</head>
<body>
    <h1>MQTT Console Logger</h1>


    <script>
        // --- Configuration ---
        // Public MQTT broker with WebSocket support
        const brokerHost = 'mqtt.cetools.org';
        const brokerPort = 8081; // Use port 8081 for WebSockets
        const clientId = 'web_client_' + parseInt(Math.random() * 10000000);

        // --- MQTT Client Setup ---
        const client = new Paho.MQTT.Client(brokerHost, brokerPort, '/mqtt', clientId);

        // Set callback handlers
        client.onConnectionLost = onConnectionLost;

        // --- Connect to the broker ---
        console.log("Attempting to connect to MQTT broker...");
        client.connect({
            onSuccess: onConnect,
            onFailure: onFailure,
            useSSL: true
        });

        // --- Callback functions ---
        function onConnect() {
            console.log("Connected successfully to MQTT broker.");
            // No subscription here, as the goal is just to test the connection.
        }

        function onConnectionLost(responseObject) {
            if (responseObject.errorCode !== 0) {
                console.error("Connection lost: " + responseObject.errorMessage);
            }
        }

        function onFailure(responseObject) {
            console.error("Connection failed.");
            console.error("Failure response:", responseObject);
        }
    </script>
</body>
</html>

---
layout: post
title:  "Vespera"
date:   2025-10-05 08:00:00 +0100
excerpt_separator: <!--more-->

# tags: try to choose one or two from these
# events, research, teaching, publication, making, arduino, casa, 
# hardware, job, book, convergence, stuff, how to work, photos, travel
tags: teaching casa

category: blog  
---

<a data-flickr-embed="true" href="https://www.flickr.com/photos/pseudonomad/54833239563/in/album-72177720329476053/" title="Vespera prototyping - Screen grab by Simon who has been modelling the installation in Rhino"><img src="https://live.staticflickr.com/65535/54833239563_bbba53e2d9_c.jpg" width="100%" alt="Vespera prototyping - Screen grab by Simon who has been modelling the installation in Rhino"/></a><script async src="//embedr.flickr.com/assets/client-code.js" charset="utf-8"></script>

The sketch above is a work in progress for this years CASA0014 installation - Vespera. Each year we get the students to build something in Arduino that interacts with the space in the lab. We have had plant monitors, the Chrono Lumina installation last year and this year we have created a new light installation based on some of the learnings from last year. It is almost complete (the students are going to help finish it in a couple of weeks) but the notes below capture some of the different component parts need to bring this installation to life. At the bottom of the page there are also some notes on the Bartlett Autumn Show and a whiskey update.

<!--more-->

The idea started with some sketches based around the idea that this year we would have one light installation that all students would contribute to through making individual light elements (as part of their learning to solder activity) but would be built by staff and have a single controller. 

<a data-flickr-embed="true" href="https://www.flickr.com/photos/pseudonomad/54785690967/in/album-72177720329476053/" title="Luminaire prototyping"><img src="https://live.staticflickr.com/65535/54785690967_1f71b8557e_c.jpg" width="100%" alt="Luminaire prototyping"/></a>

Typical of many conversations with Simon, chatting about what we can build, we end up focusing on the most complex (intertesting?) idea. In this case the death star style light. The goal was to have 12 segments (which also represnt the hour on a clock) and 6 LEDS per segment (again allowing for time based 5 minute increments). Note the sketch here shows 7 blades, the potential for time based displays drove the move to 6 blade set-up.

<a data-flickr-embed="true" href="https://www.flickr.com/photos/pseudonomad/54786866895/in/album-72177720329476053/" title="Luminaire prototyping"><img src="https://live.staticflickr.com/65535/54786866895_b3331254b5_c.jpg" width="100%" alt="Luminaire prototyping"/></a>

This single controller (Arduino MKR1010) uses a data feed from our MQTT broker to update the RGB values of the 72 LEDs. Lots of experimentation was done to test how quickly the LED's could be updated via MQTT - it turns out the 216 byte payload (72 LEDs x 3 bytes for RGB) can be sent and processed in around 200ms which is fast enough to give a good user experience - the downside is the bytearray payload is a little more difficult to understand for the newcomers to Arduino in the class. 

<a data-flickr-embed="true" href="https://www.flickr.com/photos/pseudonomad/54815957502/in/album-72177720329476053/" title="Prototyping Vespera LED board"><img src="https://live.staticflickr.com/65535/54815957502_71f63581e9_c.jpg" width="100%" alt="Prototyping Vespera LED board"/></a>

I ended up having to build a few different prototypes to show students how to interact with Vespera. First up were some Python scripts. These were also very useful for me intitially when testing the data flow through the MQTT broker to the Arduino. Below was a test of sending a "rainbow" effect which ran pretty smoothly.

<a data-flickr-embed="true" href="https://www.flickr.com/photos/pseudonomad/54786533851/in/album-72177720329476053/" title="Luminaire prototyping"><img src="https://live.staticflickr.com/65535/54786533851_d06eaf2bfa_c.jpg" width="100%" alt="Luminaire prototyping"/></a>

The student coursework task is to build an arduino based interface to control the lights - this meant I also had to build a minimal version to show them what we are after. Below is the cardboard tilt box (using 3 tilt switches on  x,y,z axis) to control the colour of the lights. Had some fun here exploring making with cardboard - one of the requirements for the coursework!

<a data-flickr-embed="true" href="https://www.flickr.com/photos/pseudonomad/54801452011/in/album-72177720329476053/" title="Luminaire Controller CASA0014"><img src="https://live.staticflickr.com/65535/54801452011_7ed80419f4_c.jpg" width="100%" alt="Luminaire Controller CASA0014"/></a>

I also realised early on that I would need a way for Vespera to respond to different controllers for each student - this meant I needed a way to be able to remotely specify which MQTT topic Vespera is listening to. This meant creating a "current user" topic on the broker and the allocation of separate topics for each student. I also had to build another controller to sit alongside Vespera so that students (and staff) can set the user value. For this I returned to an ESP32S3, rotary encoder and small OLED display.

<a data-flickr-embed="true" href="https://www.flickr.com/photos/pseudonomad/54833222204/in/album-72177720329476053/" title="Vespera prototyping"><img src="https://live.staticflickr.com/65535/54833222204_283c09cdb1_c.jpg" width="100%" alt="Vespera prototyping"/></a>

This also revealed the challenge of how do students visualise their "light show" when they cannot push data to Vespera. The [Lumi web app](https://www.iot.io/projects/lumi/) was created to allow them to "see" the colours being sent to their topic. 

<a data-flickr-embed="true" href="https://www.flickr.com/photos/pseudonomad/54833004541/in/album-72177720329476053/" title="Lumi screenshot"><img src="https://live.staticflickr.com/65535/54833004541_699def0a90_c.jpg" width="800" height="581" alt="Lumi screenshot"/></a>

All in lots of fun prototyping and building - will post some photos once it is completed by the students and installed in the lab - hopefully in next 2-3 weeks. All the code is on [GitHub in CASA0014 Vespera folder](https://github.com/ucl-casa-ce/casa0014/tree/main/vespera)

---

In other news the Bartlett Autumn Show was great again - I particularly like the BioID student work. Photo album below has lots of photos.

<a data-flickr-embed="true" data-header="true" data-footer="true" href="https://www.flickr.com/photos/pseudonomad/albums/72177720329476148" title="BartlettShow2025"><img src="https://live.staticflickr.com/65535/54833239358_0daf574696_c.jpg" width="100%" alt="BartlettShow2025"/></a>


New Whiskey - this one has been on my list for a while. Very peaty, the kind of whiskey that the whole family gets to smell when I have one on movie night. Very nice. The [Whiskey](https://www.iot.io/whiskey/) page has been updated.

<a data-flickr-embed="true" href="https://www.flickr.com/photos/pseudonomad/54833312635/in/datetaken/" title="Ardbeg"><img src="https://live.staticflickr.com/65535/54833312635_81b01c1ce6_c.jpg" width="100%" alt="Ardbeg"/></a>
